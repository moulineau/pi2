{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aymeric-PC\\\\Desktop\\\\Cours\\\\pi2\\\\project pi carre\\\\client\\\\src\\\\App.js\";\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Button } from 'reactstrap';\nimport DataTable from './Components/Tables/DataTable';\nimport { CSVLink } from \"react-csv\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      items: []\n    };\n\n    this.Home = () => {\n      this.props.history.push(\"/\", {});\n    };\n  }\n\n  getItems() {\n    fetch('/use/allUsers', {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(items => this.setState({\n      items\n    })).catch(err => {\n      err.json().then(errMess => {\n        console.log(\"error : \", errMess.message);\n\n        if (errMess.message === \"Un-Authorized User\" || errMess.message === \"Not Admin\") {\n          this.props.history.push(`/users/${sessionStorage.user_id}`, {});\n          window.location.reload();\n        } else {\n          this.props.history.push(\"/login\", {});\n        }\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.getItems();\n  }\n\n  render() {\n    return React.createElement(Container, {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      style: {\n        margin: \"20px 0\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, \"Users Database\"))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(DataTable, {\n      items: this.state.items,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }))), React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Col, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(CSVLink, {\n      filename: \"db.csv\",\n      color: \"primary\",\n      style: {\n        float: \"left\",\n        marginRight: \"10px\"\n      },\n      className: \"btn btn-primary\",\n      data: this.state.items,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"Download CSV\"), React.createElement(Button, {\n      onClick: this.Home,\n      color: \"danger\",\n      style: {\n        float: \"right\",\n        marginRight: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \" Home\"))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Aymeric-PC/Desktop/Cours/pi2/project pi carre/client/src/App.js"],"names":["React","Component","Container","Row","Col","Button","DataTable","CSVLink","App","state","items","Home","props","history","push","getItems","fetch","credentials","then","response","ok","json","setState","catch","err","errMess","console","log","message","sessionStorage","user_id","window","location","reload","componentDidMount","render","margin","float","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container, Row, Col, Button } from 'reactstrap';\r\nimport DataTable from './Components/Tables/DataTable';\r\nimport { CSVLink } from \"react-csv\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    items: []\r\n  }\r\n\r\n  getItems(){\r\n      fetch('/use/allUsers', { credentials: 'include'})\r\n          .then(response => {\r\n              if (response.ok) {\r\n                  return response.json();\r\n              } else {\r\n                  throw response;\r\n              }\r\n          })\r\n          .then(items => this.setState({items}))\r\n          .catch(err => {\r\n              err.json().then(errMess => {\r\n                  console.log(\"error : \", errMess.message);\r\n                  if (errMess.message === \"Un-Authorized User\" || errMess.message === \"Not Admin\" ) {\r\n                      this.props.history.push(`/users/${sessionStorage.user_id}`, {});\r\n                      window.location.reload();\r\n                  }\r\n                  else {\r\n                      this.props.history.push(\"/login\", {})\r\n                  }\r\n              })\r\n\r\n          })\r\n  }  \r\n\r\n  componentDidMount(){\r\n    this.getItems()\r\n  }\r\n  Home = () => {\r\n     this.props.history.push(\"/\", {});\r\n  };\r\n  render() {\r\n    return ( \r\n      <Container className=\"App\" >\r\n        <Row>\r\n          <Col>\r\n            <h1 style={{margin: \"20px 0\"}}>Users Database</h1>\r\n\t\t  </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <DataTable items={this.state.items} />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n          <Col>\r\n            <CSVLink\r\n              filename={\"db.csv\"}\r\n              color=\"primary\"\r\n              style={{float: \"left\", marginRight: \"10px\"}}\r\n              className=\"btn btn-primary\"\r\n              data={this.state.items}>\r\n              Download CSV\r\n            </CSVLink>  \r\n            <Button\r\n                onClick={this.Home}\r\n                color=\"danger\"\r\n                style={{ float: \"right\", marginRight: \"5px\" }}> Home\r\n            </Button>\r\n          </Col>\r\n            </Row>  \r\n        </Container>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}