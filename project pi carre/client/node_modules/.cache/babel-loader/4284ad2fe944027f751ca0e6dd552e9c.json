{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aymeric-PC\\\\Desktop\\\\Cours\\\\pi2\\\\project pi carre\\\\client\\\\src\\\\UserInfo.js\";\nimport React, { Component, useState } from 'react';\nimport { Table, Button, ButtonDropdown, DropdownItem, DropdownMenu, DropdownToggle } from 'reactstrap';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: [],\n      hide: true,\n      dropdownOpen: false\n    };\n\n    this.Admin = () => {\n      this.props.history.push(\"/allUsers\", {});\n    };\n\n    this.Logout = () => {\n      sessionStorage.removeItem('user_id');\n      fetch(\"/auth/logout\", {\n        credentials: 'include'\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw response;\n        }\n      }).then(res => {\n        console.log(res.message);\n        this.props.history.push(\"/login\", {});\n      }).catch(err => {\n        err.json().then(errMess => {\n          console.log(\"error : \", errMess.message);\n        });\n      });\n    };\n\n    this.toggle = () => {\n      this.setState({\n        dropdownOpen: !this.state.dropdownOpen\n      });\n    };\n  }\n\n  componentDidMount() {\n    const params = this.props.match.params;\n    fetch(`/use/users/${params.id}`, {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(user => this.setState({\n      user\n    })).catch(err => {\n      err.json().then(errMess => {\n        console.log(\"error : \", errMess.message);\n\n        if (errMess.message === \"Un-Authorized User\") {\n          this.props.history.push(`/users/${sessionStorage.user_id}`, {});\n          window.location.reload();\n        } else {\n          this.props.history.push(\"/login\", {});\n        }\n      });\n    });\n    fetch(\"/auth/isadmin\", {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(res => {\n      if (res.admin === true) {\n        this.setState({\n          hide: false\n        });\n      } else {\n        this.setState({\n          hide: true\n        });\n      }\n    });\n  }\n\n  render() {\n    const user = this.state.user.map(item => {\n      return React.createElement(\"tr\", {\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, item.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, item.nom), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, item.prenom), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, item.email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, item.mdp));\n    });\n    return React.createElement(Router, {\n      forceRefresh: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Unique User\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(ButtonDropdown, {\n      isOpen: dropdownOpen,\n      toggle: toggles,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(DropdownToggle, {\n      caret: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Mes Choix\"), React.createElement(DropdownMenu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"somme totale investie\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Somme moyenne par achat\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"moyenne des sommes par achats\"), React.createElement(DropdownItem, {\n      divider: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }), React.createElement(DropdownItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"prix moyen d'entr\\xE9e sur ethereum\"))), React.createElement(Table, {\n      responsive: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"nom\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"prenom\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"MDP\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, user)), React.createElement(Button, {\n      onClick: this.Logout,\n      color: \"danger\",\n      style: {\n        float: \"left\",\n        marginRight: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \" Logout\"), React.createElement(Button, {\n      onClick: this.Admin,\n      disabled: this.state.hide,\n      color: \"danger\",\n      style: {\n        float: \"left\",\n        marginRight: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \" Admin Access\")));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Aymeric-PC/Desktop/Cours/pi2/project pi carre/client/src/UserInfo.js"],"names":["React","Component","useState","Table","Button","ButtonDropdown","DropdownItem","DropdownMenu","DropdownToggle","BrowserRouter","Router","App","state","user","hide","dropdownOpen","Admin","props","history","push","Logout","sessionStorage","removeItem","fetch","credentials","then","response","ok","json","res","console","log","message","catch","err","errMess","toggle","setState","componentDidMount","params","match","id","user_id","window","location","reload","admin","render","map","item","nom","prenom","email","mdp","toggles","float","marginRight"],"mappings":"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","sourcesContent":["import React, { Component ,useState} from 'react';\r\nimport { Table, Button, ButtonDropdown,DropdownItem,DropdownMenu,DropdownToggle } from 'reactstrap';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\n\r\n\r\nclass App extends Component {   \r\n    state = {\r\n        user: [],\r\n        hide: true,\r\n        dropdownOpen :false\r\n    }\r\n    componentDidMount() {\r\n        const { match: { params } } = this.props;\r\n        fetch(`/use/users/${params.id}`, { credentials: 'include' })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then(user => this.setState({ user }))\r\n            .catch(err => {\r\n                err.json().then(errMess => {\r\n                    console.log(\"error : \", errMess.message);\r\n                    if (errMess.message === \"Un-Authorized User\") {\r\n                        this.props.history.push(`/users/${sessionStorage.user_id}`, {});\r\n                        window.location.reload();\r\n                    }\r\n                    else {\r\n                        this.props.history.push(\"/login\", {})\r\n                    }\r\n                })\r\n\r\n            });\r\n        fetch(\"/auth/isadmin\", { credentials: 'include' })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then(res => {\r\n                if (res.admin === true) { this.setState({ hide: false }) }\r\n                else { this.setState({ hide: true }) }\r\n            });\r\n    }\r\n    Admin = () => {\r\n        this.props.history.push(\"/allUsers\", {});\r\n    }\r\n    Logout = () => {\r\n        sessionStorage.removeItem('user_id');\r\n        fetch(\"/auth/logout\", { credentials: 'include' })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then(res => {\r\n                console.log(res.message)\r\n                this.props.history.push(\"/login\", {});\r\n            })\r\n            .catch(err => {\r\n                err.json().then(errMess => {\r\n                    console.log(\"error : \", errMess.message);\r\n                })\r\n            });        \r\n    };\r\n    toggle=()=>{\r\n        this.setState({dropdownOpen : !this.state.dropdownOpen})\r\n    }\r\n    render() {\r\n        const user = this.state.user.map(item => {\r\n            return (\r\n                <tr key={item.id}>\r\n                    <th scope=\"row\">{item.id}</th>\r\n                    <td>{item.nom}</td>\r\n                    <td>{item.prenom}</td>\r\n                    <td>{item.email}</td>\r\n                    <td>{item.mdp}</td>\r\n                </tr>\r\n            )\r\n        })\r\n        \r\n        return (\r\n            <Router forceRefresh={true}>\r\n                <div className=\"Unique User\">\r\n                    <ButtonDropdown isOpen={dropdownOpen} toggle={toggles}>\r\n                        <DropdownToggle caret>\r\n                            Mes Choix \r\n                        </DropdownToggle>\r\n                        <DropdownMenu>                            \r\n                            <DropdownItem >somme totale investie</DropdownItem>\r\n                            <DropdownItem divider />\r\n                            <DropdownItem>Somme moyenne par achat</DropdownItem>\r\n                            <DropdownItem divider />\r\n                            <DropdownItem>moyenne des sommes par achats</DropdownItem>\r\n                            <DropdownItem divider />\r\n                            <DropdownItem>prix moyen d'entrée sur ethereum</DropdownItem>\r\n                        </DropdownMenu>\r\n                    </ButtonDropdown>\r\n                    <Table responsive hover>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>nom</th>\r\n                                <th>prenom</th>\r\n                                <th>Email</th>\r\n                                <th>MDP</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {user}\r\n                        </tbody>\r\n                 \r\n                    </Table> \r\n                    <Button\r\n                        onClick={this.Logout}\r\n                        color=\"danger\"\r\n                        style={{ float: \"left\", marginRight: \"5px\" }}> Logout\r\n                    </Button>\r\n                    <Button\r\n                        onClick={this.Admin}\r\n                        disabled={this.state.hide}                        \r\n                        color=\"danger\"\r\n                        style={{ float: \"left\", marginRight: \"5px\" }}> Admin Access\r\n                    </Button>\r\n                </div>\r\n            </Router>\r\n            )\r\n    }\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}