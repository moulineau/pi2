{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aymeric-PC\\\\Desktop\\\\Cours\\\\pi2\\\\project pi carre\\\\client\\\\src\\\\UserInfo.js\";\nimport React, { Component } from 'react';\nimport { Table, Button } from 'reactstrap';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      user: [],\n      hide: true\n    };\n\n    this.Admin = () => {\n      this.props.history.push(\"/allUsers\", {});\n    };\n\n    this.Logout = () => {\n      localStorage.removeItem('user_id');\n      fetch(\"/auth/logout\", {\n        credentials: 'include'\n      }).then(response => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw response;\n        }\n      }).then(res => {\n        console.log(res.message);\n        this.props.history.push(\"/login\", {});\n      }).catch(err => {\n        err.json().then(errMess => {\n          console.log(\"error : \", errMess.message);\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    const params = this.props.match.params;\n    fetch(\"/use/users/\".concat(params.id), {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        fetch(\"/auth/isadmin\", {\n          credentials: 'include'\n        }).then(response => {\n          response.json();\n        }).then(res => {\n          if (res.admin === true) {\n            this.setState({\n              hide: false\n            });\n          } else {\n            this.setState({\n              hide: true\n            });\n          }\n        });\n        return response.json();\n      } else {\n        throw response;\n      }\n    }).then(user => this.setState({\n      user\n    })).catch(err => {\n      err.json().then(errMess => {\n        console.log(\"error : \", errMess.message);\n\n        if (errMess.message === \"Un-Authorized User\") {\n          this.props.history.push(\"/users/\".concat(localStorage.user_id), {});\n          window.location.reload();\n        } else {\n          this.props.history.push(\"/login\", {});\n        }\n      });\n    });\n  }\n\n  render() {\n    const user = this.state.user.map(item => {\n      return React.createElement(\"tr\", {\n        key: item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, item.id), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, item.nom), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, item.prenom), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, item.email), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, item.mdp));\n    });\n    return React.createElement(Router, {\n      forceRefresh: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Unique User\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, React.createElement(Table, {\n      responsive: true,\n      hover: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"nom\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"prenom\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Email\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"MDP\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, user)), React.createElement(Button, {\n      onClick: this.Logout,\n      color: \"danger\",\n      style: {\n        float: \"left\",\n        marginRight: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \" Logout\"), React.createElement(Button, {\n      onClick: this.Admin,\n      disabled: this.state.hide,\n      color: \"danger\",\n      style: {\n        float: \"left\",\n        marginRight: \"5px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \" Admin Access\")));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Aymeric-PC/Desktop/Cours/pi2/project pi carre/client/src/UserInfo.js"],"names":["React","Component","Table","Button","BrowserRouter","Router","App","state","user","hide","Admin","props","history","push","Logout","localStorage","removeItem","fetch","credentials","then","response","ok","json","res","console","log","message","catch","err","errMess","componentDidMount","params","match","id","admin","setState","user_id","window","location","reload","render","map","item","nom","prenom","email","mdp","float","marginRight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Table, Button } from 'reactstrap';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\n\r\n\r\nclass App extends Component {   \r\n    state = {\r\n        user: [],\r\n        hide: true\r\n    }\r\n    componentDidMount() {\r\n        const { match: { params } } = this.props;\r\n        fetch(`/use/users/${params.id}`, { credentials: 'include' })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    fetch(\"/auth/isadmin\", { credentials: 'include' })\r\n                        .then(response => {\r\n                            response.json();\r\n                        })\r\n                        .then(res => {\r\n                            if (res.admin === true) { this.setState({ hide: false }) }\r\n                            else { this.setState({ hide: true })}                            \r\n                        });\r\n                    return response.json();\r\n                } else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then(user => this.setState({ user }))\r\n            .catch(err => {\r\n                err.json().then(errMess => {\r\n                    console.log(\"error : \", errMess.message);\r\n                    if (errMess.message === \"Un-Authorized User\") {\r\n                        this.props.history.push(`/users/${localStorage.user_id}`, {});\r\n                        window.location.reload();\r\n                    }\r\n                    else {\r\n                        this.props.history.push(\"/login\", {})\r\n                    }\r\n                })                 \r\n                \r\n            })\r\n    }\r\n    Admin = () => {\r\n        this.props.history.push(\"/allUsers\", {});\r\n    }\r\n    Logout = () => {\r\n        localStorage.removeItem('user_id');\r\n        fetch(\"/auth/logout\", { credentials: 'include' })\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    return response.json();\r\n                } else {\r\n                    throw response;\r\n                }\r\n            })\r\n            .then(res => {\r\n                console.log(res.message)\r\n                this.props.history.push(\"/login\", {});\r\n            })\r\n            .catch(err => {\r\n                err.json().then(errMess => {\r\n                    console.log(\"error : \", errMess.message);\r\n                })\r\n            });        \r\n    };\r\n    render() {\r\n        const user = this.state.user.map(item => {\r\n            return (\r\n                <tr key={item.id}>\r\n                    <th scope=\"row\">{item.id}</th>\r\n                    <td>{item.nom}</td>\r\n                    <td>{item.prenom}</td>\r\n                    <td>{item.email}</td>\r\n                    <td>{item.mdp}</td>\r\n                </tr>\r\n            )\r\n        })\r\n        return (\r\n            <Router forceRefresh={true}>\r\n                <div className=\"Unique User\">\r\n                    <Table responsive hover>\r\n                        <thead>\r\n                            <tr>\r\n                                <th>ID</th>\r\n                                <th>nom</th>\r\n                                <th>prenom</th>\r\n                                <th>Email</th>\r\n                                <th>MDP</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {user}\r\n                        </tbody>\r\n                 \r\n                    </Table> \r\n                    <Button\r\n                        onClick={this.Logout}\r\n                        color=\"danger\"\r\n                        style={{ float: \"left\", marginRight: \"5px\" }}> Logout\r\n                    </Button>\r\n                    <Button\r\n                        onClick={this.Admin}\r\n                        disabled={this.state.hide}                        \r\n                        color=\"danger\"\r\n                        style={{ float: \"left\", marginRight: \"5px\" }}> Admin Access\r\n                    </Button>\r\n                </div>\r\n            </Router>\r\n            )\r\n    }\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}